<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spelling Bee - Offline TTS</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêù</text></svg>">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f9;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 10px;
      box-sizing: border-box;
      color: #333;
      transition: background-color 0.3s ease, color 0.3s ease;
      overflow: hidden;
    }
    body.dark-mode {
      background: #2c2c2c;
      color: #f4f6f9;
    }
    .bee-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 20px;
      width: 100%;
      max-width: 380px;
      text-align: center;
      margin: auto;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
    }
    body.dark-mode .bee-container {
      background: #3a3a3a;
      box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    }
    .title-group { margin-bottom: 5px; }
    h2 { margin: 0; font-size: 1.8em; }
    .grammar-buddy { color: blue; }
    body.dark-mode .grammar-buddy { color: lightblue; }
    input[type="text"], input[type="range"] {
      padding: 8px; border-radius: 8px; border: 1px solid #ccc;
      margin-bottom: 10px; width: 100%;
      background-color: white; color: #333;
      transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }
    body.dark-mode input[type="text"],
    body.dark-mode input[type="range"] {
      background-color: #555; border-color: #666; color: #f4f6f9;
    }
    button {
      padding: 8px 15px; margin: 4px; border: none; border-radius: 10px;
      background-color: #007bff; color: white; cursor: pointer; font-size: 0.9em;
      transition: background-color 0.3s ease;
    }
    button:hover { background-color: #0056b3; }
    button:disabled { background-color: #888; cursor: not-allowed; }
    body.dark-mode button { background-color: #568bff; }
    body.dark-mode button:hover { background-color: #3a68cf; }
    body.dark-mode button:disabled { background-color: #666; }
    .feedback { margin-top: 8px; font-weight: bold; font-size: 0.9em; }
    .definition { font-size: 0.85em; color: #444; margin: 5px 0 10px; }
    body.dark-mode .definition { color: #ddd; }
    .score-timer { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.9em; color: #333; flex-wrap: wrap; }
    body.dark-mode .score-timer { color: #f4f6f9; }
    #score { font-weight: bold; }  /* score styled as plain text */
    .volume-slider { margin: 8px 0; }
    .toggle-container { display: flex; align-items: center; justify-content: center; margin-bottom: 10px; font-size: 0.9em; }
    .toggle-container label { margin-right: 8px; }
    .switch { position: relative; display: inline-block; width: 35px; height: 18px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px; }
    .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .slider { background-color: #007bff; }
    input:focus + .slider { box-shadow: 0 0 1px #007bff; }
    input:checked + .slider:before { transform: translateX(17px); }
    #timerDisplay { display: inline-block; background-color: transparent; border: none; padding: 0; margin-left: 8px; }
    .mode-toggle-container { position: absolute; top: 10px; right: 10px; z-index: 10; }
    #modeToggle { background: none; border: none; font-size: 1.5em; cursor: pointer; padding: 0; color: #666; transition: color 0.3s ease; }
    #modeToggle:hover { color: #007bff; }
    body.dark-mode #modeToggle { color: #f4f6f9; }
    body.dark-mode #modeToggle:hover { color: #568bff; }
    .falling-emoji { position: fixed; top: -50px; font-size: 2em; opacity: 0; pointer-events: none; animation: fallAndFade 3s ease-in forwards; z-index: 1000; }
    @keyframes fallAndFade {
      0% { transform: translateY(0) scale(0.8); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(100vh) scale(1.2); opacity: 0; }
    }
    .level-buttons {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-bottom: 15px;
    }
    .level-buttons .row-2 {
        grid-column: span 3;
        display: flex;
        gap: 10px;
    }
    .level-buttons .row-2 button {
        flex-grow: 1;
    }
    @media (max-width: 360px) {
      .bee-container { padding: 15px; }
      button { padding: 6px 10px; font-size: 0.8em; }
      h2 { font-size: 1.6em; }
      .mode-toggle-container { top: 5px; right: 5px; }
    }
  </style>
</head>
<body>
  <div class="bee-container">
    <div class="mode-toggle-container">
        <button id="modeToggle">‚òÄÔ∏è</button>
    </div>

    <div class="title-group">
        <h2 class="grammar-buddy">GrammarBuddy</h2>
        <h2>üêù Spelling Bee</h2>
    </div>

    <div class="level-buttons">
      <button id="easyBtn" onclick="selectLevelAndStart('easy')">Beginner</button>
      <button id="hardBtn" onclick="selectLevelAndStart('hard')">Intermediate</button>
      <button id="difficultBtn" onclick="selectLevelAndStart('difficult')">Advanced</button>
      <div class="row-2">
        <button id="legendBtn" onclick="selectLevelAndStart('legend')">Expert</button>
        <button id="tharooristBtn" onclick="selectLevelAndStart('tharoorist')">Champion</button>
      </div>
    </div>

    <div class="score-timer">
      <span id="score">Score: 0/0</span>
      <div class="toggle-container">
        <label for="timerToggle">Timer:</label>
        <label class="switch">
          <input type="checkbox" id="timerToggle">
          <span class="slider round"></span>
        </label>
        <span id="timerDisplay"></span>
      </div>
    </div>

    <label for="volume">üîä Volume</label>
    <input type="range" id="volume" class="volume-slider" min="0" max="1" step="0.1" value="1" />

    <div class="definition" id="definition">Select a level to start.</div>

    <input type="text" id="userInput" placeholder="TYPE THE WORD HERE" />
    <div>
      <button id="hearButton" onclick="speakWord()">üîä Hear</button>
      <button id="answerButton" onclick="checkAnswer()">‚úÖ Answer</button>
    </div>
    <div class="feedback" id="feedback"></div>
  </div>

  <script>
    const wordList = {
      easy: [
        { word: "apple", meaning: "a sweet fruit" },
        { word: "book", meaning: "pages bound with writing" },
        { word: "rain", meaning: "water from the sky" },
        { word: "water", meaning: "clear liquid we drink" },
        { word: "bread", meaning: "baked food made from flour" },
        { word: "juice", meaning: "drink from fruit" },
        { word: "chair", meaning: "something to sit on" },
        { word: "table", meaning: "flat surface with legs" },
        { word: "spoon", meaning: "tool for eating or serving" },
        { word: "plate", meaning: "dish for holding food" },
        { word: "light", meaning: "brightness from the sun or lamp" },
        { word: "night", meaning: "time when it is dark" },
        { word: "house", meaning: "a place where people live" },
        { word: "floor", meaning: "bottom surface of a room" },
        { word: "cloud", meaning: "white shape in the sky" },
        { word: "grass", meaning: "green plants on the ground" },
        { word: "flower", meaning: "colorful plant" },
        { word: "mango", meaning: "a sweet tropical fruit" },
        { word: "orange", meaning: "a round fruit or color" },
        { word: "banana", meaning: "long yellow fruit" },
        { word: "tiger", meaning: "large wild cat with stripes" },
        { word: "zebra", meaning: "black and white striped animal" },
        { word: "money", meaning: "used to buy things" },
        { word: "pencil", meaning: "tool for writing" },
        { word: "eraser", meaning: "used to remove pencil marks" },
        { word: "marker", meaning: "pen with bright ink" },
        { word: "window", meaning: "opening in a wall with glass" },
        { word: "pillow", meaning: "soft support for the head" },
        { word: "bucket", meaning: "used to hold water or things" },
        { word: "school", meaning: "place to learn" },
        { word: "teacher", meaning: "person who helps you learn" },
        { word: "doctor", meaning: "person who helps sick people" },
        { word: "farmer", meaning: "person who grows food" },
        { word: "police", meaning: "person who protects people" },
        { word: "animal", meaning: "living creature (not human)" },
        { word: "family", meaning: "parents and children" },
        { word: "mother", meaning: "female parent" },
        { word: "father", meaning: "male parent" },
        { word: "sister", meaning: "girl sibling" },
        { word: "brother", meaning: "boy sibling" },
        { word: "garden", meaning: "area with flowers or plants" },
        { word: "bottle", meaning: "container for liquids" },
        { word: "yellow", meaning: "color like the sun" },
        { word: "purple", meaning: "color mix of red and blue" },
        { word: "orange", meaning: "color or a fruit" },
        { word: "ladder", meaning: "used to climb up" },
        { word: "camera", meaning: "used to take pictures" },
        { word: "cookie", meaning: "sweet baked snack" },
        { word: "butter", meaning: "yellow fat from milk" },
        { word: "market", meaning: "place to buy things" },
        { word: "school", meaning: "place where students learn" },
        { word: "ruler", meaning: "used to measure length" },
        { word: "summer", meaning: "hot season of the year" },
        { word: "winter", meaning: "cold season with snow" },
        { word: "season", meaning: "one of the four parts of the year" },
        { word: "shadow", meaning: "dark shape made by light blocking" },
        { word: "yellow", meaning: "color like bananas" },
        { word: "mirror", meaning: "glass that shows your reflection" },
        { word: "bottle", meaning: "container to hold liquids" },
        { word: "cupboard", meaning: "a box-like storage with doors" },
        { word: "button", meaning: "small round object on clothes" },
        { word: "summer", meaning: "the hottest season" },
        { word: "letter", meaning: "written message" },
        { word: "window", meaning: "opening in a wall with glass" },
        { word: "garden", meaning: "place with plants and flowers" },
        { word: "circle", meaning: "round shape" },
        { word: "square", meaning: "shape with four equal sides" },
        { word: "number", meaning: "shows how many" },
        { word: "finger", meaning: "part of your hand" },
        { word: "animal", meaning: "non-human living being" },
        { word: "monkey", meaning: "smart animal with long tail" },
        { word: "camel", meaning: "desert animal with humps" },
        { word: "sheep", meaning: "farm animal with wool" },
        { word: "tiger", meaning: "wild cat with stripes" },
        { word: "rabbit", meaning: "animal with long ears" },
        { word: "spider", meaning: "insect with eight legs" },
        { word: "butter", meaning: "spread made from milk" },
        { word: "mirror", meaning: "shows your reflection" },
        { word: "basket", meaning: "container made from woven material" },
        { word: "closet", meaning: "small room to keep clothes" },
        { word: "window", meaning: "glass opening for air and light" },
        { word: "jacket", meaning: "warm clothing worn on top" },
        { word: "shirt", meaning: "clothing for the upper body" },
        { word: "dress", meaning: "clothing worn by girls or women" },
        { word: "trousers", meaning: "clothing worn on legs" },
        { word: "shorts", meaning: "short trousers" },
        { word: "colour", meaning: "what you see (like red, green)" },
        { word: "slipper", meaning: "light shoe worn at home" },
        { word: "bucket", meaning: "round container with handle" },
        { word: "candle", meaning: "gives light when lit" },
        { word: "garden", meaning: "place where flowers grow" },
        { word: "pillow", meaning: "soft thing for resting your head" },
        { word: "poster", meaning: "large printed paper for display" },
        { word: "sticker", meaning: "picture with glue on back" },
        { word: "tablet", meaning: "small computer" },
        { word: "mobile", meaning: "phone you can carry" },
        { word: "socket", meaning: "place where you plug something in" },
        { word: "ticket", meaning: "paper that lets you enter" },
        { word: "engine", meaning: "machine that makes a car go" },
        { word: "helmet", meaning: "head protection" },
        { word: "ladder", meaning: "tool for climbing" },
        { word: "painter", meaning: "person who paints" },
        { word: "driver", meaning: "person who drives vehicles" },
        { word: "cleaner", meaning: "person who cleans" },
        { word: "doctor", meaning: "person who treats illness" },
        { word: "tailor", meaning: "person who sews clothes" },
        { word: "singer", meaning: "person who sings" },
        { word: "dancer", meaning: "person who dances" },
        { word: "cooker", meaning: "used to prepare food" },
        { word: "animal", meaning: "living creature" },
        { word: "insect", meaning: "small animal with six legs" },
        { word: "lizard", meaning: "small reptile" },
        { word: "garden", meaning: "area to grow plants" },
        { word: "window", meaning: "part of a wall that lets in light" },
        { word: "hanger", meaning: "used to hang clothes" },
        { word: "marker", meaning: "pen for writing" },
        { word: "rubber", meaning: "eraser" },
        { word: "doctor", meaning: "person who helps the sick" },
        { word: "painter", meaning: "one who paints walls or pictures" },
        { word: "singer", meaning: "one who sings songs" },
        { word: "waiter", meaning: "one who serves food" },
        { word: "vendor", meaning: "one who sells things" },
        { word: "yellow", meaning: "a color" },
        { word: "circle", meaning: "round shape" },
        { word: "animal", meaning: "living creature" },
        { word: "pocket", meaning: "small pouch on clothes" },
        { word: "banana", meaning: "long yellow fruit" },
        { word: "wallet", meaning: "holds money" },
        { word: "window", meaning: "glass-covered opening" },
        { word: "fridge", meaning: "keeps food cold" },
        { word: "locket", meaning: "small necklace with picture" },
        { word: "sponge", meaning: "soft object used for cleaning" },
        { word: "tissue", meaning: "soft paper for cleaning" },
        { word: "curtain", meaning: "cloth covering a window" },
        { word: "tunnel", meaning: "long underground passage" },
        { word: "hammer", meaning: "tool used to hit things" },
        { word: "hanger", meaning: "holds clothes in a closet" },
        { word: "finger", meaning: "part of hand" },
        { word: "pillow", meaning: "soft thing to rest your head" },
        { word: "jungle", meaning: "thick forest" },
        { word: "dragon", meaning: "large fire-breathing creature" },
        { word: "bottle", meaning: "used to hold liquids" },
        { word: "tomato", meaning: "red round vegetable" },
        { word: "carrot", meaning: "orange root vegetable" },
        { word: "onion", meaning: "round vegetable with layers" },
        { word: "pepper", meaning: "spicy or black powder" },
        { word: "celery", meaning: "crunchy green vegetable" },
        { word: "honey", meaning: "sweet food made by bees" },
        { word: "butter", meaning: "yellow fat used in cooking" },
        { word: "laptop", meaning: "small portable computer" },
        { word: "window", meaning: "part of a wall for seeing outside" },
        { word: "socket", meaning: "a plug point" },
        { word: "cushion", meaning: "soft pillow-like object" },
        { word: "magnet", meaning: "attracts metal" },
        { word: "hammer", meaning: "tool to hit nails" },
        { word: "drawer", meaning: "box that pulls out in furniture" },
        { word: "carpet", meaning: "soft covering for the floor" },
        { word: "marker", meaning: "colorful writing tool" },
        { word: "rocket", meaning: "flies into space" },
        { word: "animal", meaning: "non-human creature" },
        { word: "planet", meaning: "a big object in space" },
        { word: "tunnel", meaning: "underground road or passage" },
        { word: "shadow", meaning: "dark shape when light is blocked" },
        { word: "circle", meaning: "round shape" },
        { word: "triangle", meaning: "shape with three sides" },
        { word: "compass", meaning: "tool that shows direction" },
        { word: "season", meaning: "part of the year" },
        { word: "mirror", meaning: "glass that shows reflection" },
        { word: "ladder", meaning: "tool to go up" },
        { word: "puppet", meaning: "toy moved by strings" },
        { word: "whistle", meaning: "makes a high sound when blown" },
        { word: "flower", meaning: "a colorful plant part" },
        { word: "light", meaning: "radiant energy that makes things visible" },
        { word: "happy", meaning: "feeling or showing pleasure or contentment" }
      ],
      hard: [
        { word: "pyramid", meaning: "a triangular ancient structure" },
        { word: "capture", meaning: "to catch or take someone or something" },
        { word: "vehicle", meaning: "a machine used for transport" },
        { word: "journey", meaning: "a long trip or travel" },
        { word: "fantasy", meaning: "imagination or made-up story" },
        { word: "monster", meaning: "a scary or strange creature" },
        { word: "thunder", meaning: "loud sound after lightning" },
        { word: "justice", meaning: "fairness or lawfulness" },
        { word: "imagine", meaning: "to picture something in your mind" },
        { word: "freedom", meaning: "the state of being free" },
        { word: "plastic", meaning: "material used to make many objects" },
        { word: "distant", meaning: "far away" },
        { word: "explore", meaning: "to travel to learn or discover" },
        { word: "harvest", meaning: "to gather crops" },
        { word: "courage", meaning: "bravery or strength in fear" },
        { word: "machine", meaning: "a tool with moving parts" },
        { word: "silence", meaning: "no sound or noise" },
        { word: "culture", meaning: "ideas and customs of a group" },
        { word: "airport", meaning: "place where planes land and take off" },
        { word: "mixture", meaning: "combination of two or more things" },
        { word: "circus", meaning: "a show with clowns and animals" },
        { word: "blanket", meaning: "soft cover used for warmth" },
        { word: "rescue", meaning: "to save someone from danger" },
        { word: "message", meaning: "a written or spoken note" },
        { word: "lantern", meaning: "a light inside a container" },
        { word: "luggage", meaning: "bags and suitcases for travel" },
        { word: "musical", meaning: "a play with singing and music" },
        { word: "picnic", meaning: "meal eaten outdoors" },
        { word: "fortune", meaning: "a large amount of money or luck" },
        { word: "compass", meaning: "tool that shows direction" },
        { word: "artist", meaning: "someone who creates art" },
        { word: "athlete", meaning: "someone good at sports" },
        { word: "balance", meaning: "staying steady and not falling" },
        { word: "crystal", meaning: "clear, hard material with sharp lines" },
        { word: "destroy", meaning: "to ruin or break completely" },
        { word: "express", meaning: "to show feelings or thoughts" },
        { word: "gravity", meaning: "the force that pulls things to the Earth" },
        { word: "measure", meaning: "to find the size or amount" },
        { word: "natural", meaning: "found in nature, not made by people" },
        { word: "pattern", meaning: "a repeated design or shape" },
        { word: "silence", meaning: "complete quietness" },
        { word: "journey", meaning: "traveling from one place to another" },
        { word: "ancient", meaning: "very old or from long ago" },
        { word: "shelter", meaning: "a safe place from weather or danger" },
        { word: "surgeon", meaning: "a doctor who performs operations" },
        { word: "insect", meaning: "small creature with six legs" },
        { word: "recycle", meaning: "to reuse materials instead of throwing" },
        { word: "magnet", meaning: "object that attracts metal" },
        { word: "planet", meaning: "a large body in space" },
        { word: "tunnel", meaning: "an underground passage" },
        { word: "vehicle", meaning: "something used for transport" },
        { word: "capture", meaning: "to take or catch" },
        { word: "fossil", meaning: "remains of ancient life in rock" },
        { word: "success", meaning: "doing well or reaching a goal" },
        { word: "perfume", meaning: "a nice-smelling liquid" },
        { word: "battery", meaning: "device that stores energy" },
        { word: "thunder", meaning: "loud sound from the sky" },
        { word: "journey", meaning: "trip from one place to another" },
        { word: "warning", meaning: "a signal of danger" },
        { word: "crowded", meaning: "full of people" },
        { word: "opinion", meaning: "what someone thinks or believes" },
        { word: "ancient", meaning: "very old or from history" },
        { word: "picture", meaning: "an image or photo" },
        { word: "fiction", meaning: "made-up story" },
        { word: "drought", meaning: "long period without rain" },
        { word: "balance", meaning: "equal weight on both sides" },
        { word: "rainbow", meaning: "colored arc seen after rain" },
        { word: "healthy", meaning: "in good health" },
        { word: "painful", meaning: "causing pain" },
        { word: "produce", meaning: "to make or create something" },
        { word: "vanish", meaning: "to disappear quickly" },
        { word: "courage", meaning: "the ability to face fear" },
        { word: "shelter", meaning: "a safe or covered place" },
        { word: "trouble", meaning: "problems or difficulties" },
        { word: "whisper", meaning: "to speak very quietly" },
        { word: "blanket", meaning: "cover to keep warm" },
        { word: "cactus", meaning: "a plant that grows in the desert" },
        { word: "sticker", meaning: "a label with glue" },
        { word: "monster", meaning: "a scary or ugly creature" },
        { word: "loyalty", meaning: "being faithful to someone or something" },
        { word: "welcome", meaning: "greeting someone kindly" },
        { word: "accident", meaning: "something bad that happens by chance" },
        { word: "weather", meaning: "condition of the air (rain, sun, etc.)" },
        { word: "delight", meaning: "great joy or happiness" },
        { word: "disease", meaning: "illness or sickness" },
        { word: "subject", meaning: "a school topic or area of study" },
        { word: "collect", meaning: "to gather things" },
        { word: "warning", meaning: "something that tells of danger" },
        { word: "mistake", meaning: "something done wrong" },
        { word: "example", meaning: "something used to show an idea" },
        { word: "blanket", meaning: "soft cover" },
        { word: "confuse", meaning: "to mix up or not understand" },
        { word: "combine", meaning: "to put together" },
        { word: "rebuild", meaning: "to build again" },
        { word: "airport", meaning: "place where planes arrive/depart" },
        { word: "library", meaning: "place with many books" },
        { word: "crystal", meaning: "clear rock-like material" },
        { word: "replace", meaning: "to take the place of something" },
        { word: "article", meaning: "a piece of writing or report" },
        { word: "musical", meaning: "play or show with songs" },
        { word: "explain", meaning: "to make something clear" },
        { word: "improve", meaning: "to make better" },
        { word: "bicycle", meaning: "vehicle with two wheels" },
        { word: "factory", meaning: "place where things are made" },
        { word: "package", meaning: "a box or wrapped item" },
        { word: "suggest", meaning: "to give an idea or advice" },
        { word: "awesome", meaning: "really great or amazing" },
        { word: "forward", meaning: "in the front direction" },
        { word: "rotate", meaning: "to turn around something" },
        { word: "surface", meaning: "the top part of something" },
        { word: "climate", meaning: "usual weather in a place" },
        { word: "arrange", meaning: "to put in order" },
        { word: "connect", meaning: "to join things together" },
        { word: "thunder", meaning: "loud noise from storm" },
        { word: "nervous", meaning: "feeling worried or afraid" },
        { word: "fiction", meaning: "story that is not true" },
        { word: "battery", meaning: "powers a device" },
        { word: "blanket", meaning: "soft cloth for covering" },
        { word: "insect", meaning: "tiny creature like ant or bee" },
        { word: "measure", meaning: "to find the size or length" },
        { word: "mission", meaning: "an important job or journey" },
        { word: "perform", meaning: "to act or do in front of others" },
        { word: "pointer", meaning: "a tool or finger that shows something" },
        { word: "remove", meaning: "to take away" },
        { word: "quickly", meaning: "done fast" },
        { word: "passage", meaning: "narrow way or text excerpt" },
        { word: "service", meaning: "helping or doing work for others" },
        { word: "texture", meaning: "how something feels" },
        { word: "message", meaning: "note or communication" },
        { word: "trouble", meaning: "problem or difficulty" },
        { word: "pathway", meaning: "small road or track" },
        { word: "problem", meaning: "something that needs solving" },
        { word: "respond", meaning: "to reply or answer" },
        { word: "curtain", meaning: "cloth that covers windows" },
        { word: "blanket", meaning: "warm cover" },
        { word: "forward", meaning: "moving ahead" },
        { word: "village", meaning: "small group of houses" },
        { word: "capture", meaning: "to catch or seize" },
        { word: "promote", meaning: "to support or help grow" },
        { word: "rescue", meaning: "to save from harm" },
        { word: "silence", meaning: "complete quiet" },
        { word: "support", meaning: "to help or hold up" },
        { word: "tunnel", meaning: "long underground path" },
        { word: "crystal", meaning: "clear, often shiny rock" },
        { word: "musical", meaning: "a story with songs and music" },
        { word: "victory", meaning: "success in a game or war" },
        { word: "subject", meaning: "topic of study or talk" },
        { word: "rainbow", meaning: "colored arc in the sky" },
        { word: "pyramid", meaning: "a tall, pointed stone structure" },
        { word: "vehicle", meaning: "thing that moves people (car, bus, etc.)" },
        { word: "garbage", meaning: "trash or waste" },
        { word: "nervous", meaning: "worried or anxious" },
        { word: "journey", meaning: "long trip" },
        { word: "plastic", meaning: "material used for many things" },
        { word: "journey", meaning: "act of traveling" },
        { word: "capture", meaning: "to take prisoner or control" },
        { word: "program", meaning: "plan or computer instructions" },
        { word: "digital", meaning: "involving computers or screens" },
        { word: "harvest", meaning: "collecting crops" },
        { word: "contest", meaning: "competition or game" },
        { word: "warning", meaning: "notice of danger" },
        { word: "dentist", meaning: "tooth doctor" },
        { word: "journal", meaning: "daily writing or record" },
        { word: "concept", meaning: "idea or thought" },
        { word: "capital", meaning: "main city of a country" },
        { word: "silence", meaning: "complete quiet" },
        { word: "species", meaning: "type of animal or plant" },
        { word: "history", meaning: "study of past events" },
        { word: "project", meaning: "a planned task or assignment" },
        { word: "journey", meaning: "a trip or voyage" },
        { word: "mystery", meaning: "something not known or solved" },
        { word: "pattern", meaning: "repeated design" },
        { word: "machine", meaning: "device with moving parts" },
        { word: "justice", meaning: "fairness or law" },
        { word: "explore", meaning: "to look around and learn" },
        { word: "ancient", meaning: "very old" },
        { word: "surface", meaning: "outermost layer" },
        { word: "exercise", meaning: "activity requiring physical effort" },
        { word: "challenge", meaning: "a call to take part in a contest" },
        { word: "knowledge", meaning: "facts, information, and skills acquired" }
      ],
      difficult: [
        { word: "psychology", meaning: "study of the human mind" },
        { word: "entrepreneur", meaning: "a person who starts a business" },
        { word: "rhythm", meaning: "a regular beat or pattern" },
        { word: "philosophy", meaning: "study of ideas about life" },
        { word: "architecture", meaning: "design of buildings" },
        { word: "diplomacy", meaning: "managing relationships between countries" },
        { word: "hypothesis", meaning: "an idea that is tested" },
        { word: "exaggeration", meaning: "making something seem bigger than it is" },
        { word: "astrophysics", meaning: "science of stars and space" },
        { word: "equilibrium", meaning: "balance or stability" },
        { word: "contradiction", meaning: "two things that disagree" },
        { word: "consciousness", meaning: "being aware of yourself" },
        { word: "microorganism", meaning: "tiny living thing" },
        { word: "autobiography", meaning: "a person's life written by themselves" },
        { word: "anthropology", meaning: "study of humans and cultures" },
        { word: "civilization", meaning: "developed human society" },
        { word: "meteorology", meaning: "study of weather" },
        { word: "exaggeration", meaning: "overstating something" },
        { word: "sustainability", meaning: "lasting without harm to nature" },
        { word: "entrepreneur", meaning: "business starter and risk taker" },
        { word: "biodiversity", meaning: "variety of life in nature" },
        { word: "infrastructure", meaning: "systems like roads and electricity" },
        { word: "multicultural", meaning: "involving many cultures" },
        { word: "accountability", meaning: "being responsible for actions" },
        { word: "electromagnetic", meaning: "related to electricity and magnetism" },
        { word: "documentation", meaning: "records or papers" },
        { word: "perseverance", meaning: "not giving up" },
        { word: "chronological", meaning: "in time order" },
        { word: "socioeconomic", meaning: "related to money and society" },
        { word: "jurisdiction", meaning: "legal power or authority" },
        { word: "vulnerability", meaning: "being easily hurt or harmed" },
        { word: "rehabilitation", meaning: "helping to recover or get better" },
        { word: "specialization", meaning: "focusing on one specific area" },
        { word: "philosophical", meaning: "related to deep thinking or ideas" },
        { word: "biotechnology", meaning: "using biology for technology" },
        { word: "mathematician", meaning: "person who studies math" },
        { word: "experimentation", meaning: "trying things out to test ideas" },
        { word: "accountability", meaning: "being answerable for your actions" },
        { word: "hypothetical", meaning: "imagined or possible" },
        { word: "electromagnetic", meaning: "electricity + magnetism" },
        { word: "unconventional", meaning: "not usual or normal" },
        { word: "interdisciplinary", meaning: "involving more than one subject" },
        { word: "microorganism", meaning: "a tiny living creature" },
        { word: "verification", meaning: "proving something is true" },
        { word: "precipitation", meaning: "rain, snow, sleet, etc." },
        { word: "biochemistry", meaning: "chemistry of living things" },
        { word: "constitutional", meaning: "related to the law or a constitution" },
        { word: "vulnerability", meaning: "state of being weak or open to harm" },
        { word: "exaggeration", meaning: "saying more than what‚Äôs true" },
        { word: "generalization", meaning: "broad statement based on a few cases" },
        { word: "deconstruction", meaning: "breaking down ideas to understand them" },
        { word: "neurological", meaning: "related to the brain and nerves" },
        { word: "configuration", meaning: "arrangement of parts" },
        { word: "sustainability", meaning: "using resources wisely" },
        { word: "equilibrium", meaning: "a state of balance" },
        { word: "instrumentation", meaning: "using tools for measurement" },
        { word: "contradiction", meaning: "a conflict between two things" },
        { word: "differentiation", meaning: "telling things apart" },
        { word: "manifestation", meaning: "showing or appearing clearly" },
        { word: "jurisdiction", meaning: "area of legal power" },
        { word: "subconscious", meaning: "part of the mind not fully aware" },
        { word: "recalibration", meaning: "adjusting again for accuracy" },
        { word: "quantification", meaning: "measuring or expressing as numbers" },
        { word: "entrepreneurship", meaning: "starting and running a business" },
        { word: "anthropologist", meaning: "one who studies human cultures" },
        { word: "authentication", meaning: "proving something is real or true" },
        { word: "introspective", meaning: "thinking deeply about yourself" },
        { word: "circumstantial", meaning: "based on surrounding facts" },
        { word: "diversification", meaning: "making more varied" },
        { word: "philosophical", meaning: "based on deep thinking or beliefs" },
        { word: "contextual", meaning: "based on the situation or context" },
        { word: "acceleration", meaning: "speeding up" },
        { word: "transformation", meaning: "big change" },
        { word: "misinterpretation", meaning: "wrong understanding" },
        { word: "redistribution", meaning: "giving things out differently" },
        { word: "imperialism", meaning: "powerful country controlling others" },
        { word: "procrastination", meaning: "delaying or putting off" },
        { word: "classification", meaning: "sorting into groups" },
        { word: "rehabilitation", meaning: "recovery from illness or problems" },
        { word: "documentation", meaning: "official written records" },
        { word: "justification", meaning: "good reason for something" },
        { word: "differentiation", meaning: "finding the difference" },
        { word: "representation", meaning: "speaking or acting for others" },
        { word: "collaboration", meaning: "working together" },
        { word: "discrimination", meaning: "unfair treatment" },
        { word: "exaggeration", meaning: "making something sound greater" },
        { word: "specialization", meaning: "focus on one thing" },
        { word: "vulnerability", meaning: "open to harm" },
        { word: "synchronization", meaning: "things happening at the same time" },
        { word: "experimentation", meaning: "testing ideas through trials" },
        { word: "constitutional", meaning: "legal or lawful" },
        { word: "dramatization", meaning: "making something seem dramatic" },
        { word: "clarification", meaning: "making something clear" },
        { word: "commercialization", meaning: "making something for business use" },
        { word: "identification", meaning: "proving who or what something is" },
        { word: "manipulation", meaning: "controlling something or someone" },
        { word: "exaggeration", meaning: "overstating the truth" },
        { word: "entrepreneurship", meaning: "running a business" },
        { word: "hypersensitive", meaning: "very easily affected" },
        { word: "environmental", meaning: "related to nature or surroundings" },
        { word: "psychological", meaning: "related to the mind" },
        { word: "technological", meaning: "related to technology" },
        { word: "geopolitical", meaning: "politics related to geography" },
        { word: "constitutional", meaning: "related to a constitution" },
        { word: "unconventional", meaning: "not usual or traditional" },
        { word: "biographical", meaning: "story of someone‚Äôs life" },
        { word: "administrative", meaning: "related to managing or organizing" },
        { word: "incompatible", meaning: "not working well together" },
        { word: "spontaneous", meaning: "done without planning" },
        { word: "subconscious", meaning: "thoughts not fully aware" },
        { word: "professional", meaning: "expert or paid worker" },
        { word: "international", meaning: "between or among countries" },
        { word: "controversial", meaning: "causing disagreement" },
        { word: "organizational", meaning: "related to organizing" },
        { word: "unsustainable", meaning: "not able to continue over time" },
        { word: "atmospheric", meaning: "related to the air or atmosphere" },
        { word: "simultaneous", meaning: "happening at the same time" },
        { word: "anthropological", meaning: "related to study of humans" },
        { word: "commemorative", meaning: "meant to remember something" },
        { word: "interdependent", meaning: "depending on each other" },
        { word: "entrepreneurial", meaning: "showing business skill" },
        { word: "misconception", meaning: "wrong idea or belief" },
        { word: "unpredictability", meaning: "can‚Äôt be predicted" },
        { word: "governmental", meaning: "related to the government" },
        { word: "hyperactive", meaning: "too active or restless" },
        { word: "transitional", meaning: "moving from one state to another" },
        { word: "representative", meaning: "someone who speaks or acts for others" },
        { word: "psychological", meaning: "related to the human mind" },
        { word: "transcontinental", meaning: "across a continent" },
        { word: "underprivileged", meaning: "lacking money or opportunity" },
        { word: "interpretive", meaning: "based on explaining or understanding" },
        { word: "commemorative", meaning: "honoring or remembering" },
        { word: "inaccessible", meaning: "hard to reach or get to" },
        { word: "incomprehensible", meaning: "not able to be understood" },
        { word: "evolutionary", meaning: "related to slow change over time" },
        { word: "disorientation", meaning: "confusion about where you are" },
        { word: "extraterritorial", meaning: "beyond national boundaries" },
        { word: "interpersonal", meaning: "between people" },
        { word: "miscommunication", meaning: "failure to exchange information" },
        { word: "revolutionary", meaning: "causing great change" },
        { word: "electromagnetic", meaning: "involving electric and magnetic forces" },
        { word: "sensationalism", meaning: "use of exciting language to attract" },
        { word: "multifaceted", meaning: "having many parts or sides" },
        { word: "discontinuation", meaning: "stopping something permanently" },
        { word: "bureaucratic", meaning: "related to government systems" },
        { word: "artificiality", meaning: "not natural" },
        { word: "self-discipline", meaning: "control over your own behavior" },
        { word: "verification", meaning: "checking for truth" },
        { word: "disqualification", meaning: "removal from a competition or role" },
        { word: "decentralization", meaning: "spreading out power or control" },
        { word: "semiconscious", meaning: "half awake or aware" },
        { word: "unpredictability", meaning: "inability to predict" },
        { word: "disproportionate", meaning: "not in correct balance" },
        { word: "preestablished", meaning: "already set or decided" },
        { word: "underrepresented", meaning: "not enough presence in a group" },
        { word: "rationalization", meaning: "making excuses or logical reasons" },
        { word: "scientific", meaning: "based on science" },
        { word: "theatrical", meaning: "related to acting or drama" },
        { word: "inquisitive", meaning: "curious or eager to learn" },
        { word: "statistical", meaning: "related to numbers and data" },
        { word: "constitutional", meaning: "based on a nation's laws" },
        { word: "transcendental", meaning: "spiritual or beyond normal experience" },
        { word: "atmospheric", meaning: "relating to the air around us" },
        { word: "intellectual", meaning: "involving deep thought or knowledge" },
        { word: "courageous", meaning: "not deterred by danger or pain" },
        { word: "conscious", meaning: "aware of and responding to one's surroundings" },
        { word: "definitely", meaning: "without any doubt" }
      ],
      legend: [
        { word: "sesquipedalian", meaning: "using long words" },
        { word: "juxtaposition", meaning: "placing things side by side for contrast" },
        { word: "anachronistic", meaning: "out of place in time" },
        { word: "magniloquent", meaning: "speaking in a grand or pompous way" },
        { word: "antidisestablishmentarianism", meaning: "opposition to separation of church and state" },
        { word: "floccinaucinihilipilification", meaning: "the act of seeing something as worthless" },
        { word: "circumlocution", meaning: "using too many words to say something" },
        { word: "perspicacious", meaning: "having sharp understanding or insight" },
        { word: "incommunicado", meaning: "unable or unwilling to communicate" },
        { word: "defenestration", meaning: "the act of throwing someone out of a window" },
        { word: "misanthropic", meaning: "hating or distrusting people" },
        { word: "opprobrious", meaning: "expressing strong criticism or scorn" },
        { word: "preternatural", meaning: "beyond what is normal or natural" },
        { word: "discombobulate", meaning: "to confuse or upset" },
        { word: "grandiloquent", meaning: "using fancy or lofty language" },
        { word: "soliloquy", meaning: "speaking alone in a play" },
        { word: "pseudointellectual", meaning: "pretending to be smart or academic" },
        { word: "circumambulate", meaning: "to walk around something" },
        { word: "indefatigable", meaning: "never getting tired" },
        { word: "consanguineous", meaning: "related by blood" },
        { word: "maladroit", meaning: "clumsy or unskilled" },
        { word: "transubstantiation", meaning: "change of substance (often religious term)" },
        { word: "obfuscation", meaning: "making something unclear" },
        { word: "recalcitrant", meaning: "stubbornly refusing to obey" },
        { word: "eschatological", meaning: "related to the end of the world" },
        { word: "dichotomous", meaning: "divided into two clear parts" },
        { word: "sycophantic", meaning: "overly flattering for personal gain" },
        { word: "prevarication", meaning: "avoiding the truth or lying" },
        { word: "phantasmagorical", meaning: "dreamlike or surreal" },
        { word: "idiosyncratic", meaning: "very unique or unusual behavior" },
        { word: "circumstantial", meaning: "based on conditions or situations" },
        { word: "extemporaneous", meaning: "done without preparation" },
        { word: "vicissitudes", meaning: "changes or hardships in life" },
        { word: "absquatulate", meaning: "to leave suddenly or secretly" },
        { word: "hermeneutics", meaning: "study of interpretation (texts, meaning)" },
        { word: "anthropocentric", meaning: "human-centered" },
        { word: "misappropriation", meaning: "misuse of money or property" },
        { word: "interpellation", meaning: "formal questioning (esp. in politics)" },
        { word: "infinitesimal", meaning: "extremely small" },
        { word: "supercilious", meaning: "arrogant or superior" },
        { word: "dichotomy", meaning: "division between two opposite things" },
        { word: "lugubrious", meaning: "overly sad or gloomy" },
        { word: "insouciance", meaning: "casual lack of concern" },
        { word: "magnanimous", meaning: "very generous or forgiving" },
        { word: "polyglot", meaning: "a person who knows many languages" },
        { word: "bibliophile", meaning: "a book lover" },
        { word: "disingenuous", meaning: "not honest or sincere" },
        { word: "quixotic", meaning: "extremely idealistic but impractical" },
        { word: "metacognition", meaning: "thinking about thinking" },
        { word: "irreconcilable", meaning: "cannot be made to agree" },
        { word: "perspicuity", meaning: "clarity or clearness" },
        { word: "demagoguery", meaning: "using emotions to gain power" },
        { word: "hyperbole", meaning: "extreme exaggeration" },
        { word: "tautological", meaning: "needlessly repetitive" },
        { word: "circumvention", meaning: "avoiding something cleverly" },
        { word: "plenipotentiary", meaning: "person with full power (esp. diplomat)" },
        { word: "interlocutor", meaning: "someone you are speaking with" },
        { word: "misanthropy", meaning: "dislike of people" },
        { word: "anthropomorphic", meaning: "giving human traits to non-humans" },
        { word: "vituperative", meaning: "full of harsh criticism" },
        { word: "prognostication", meaning: "a prediction or forecast" },
        { word: "oracular", meaning: "mysterious or wise like an oracle" },
        { word: "etymological", meaning: "related to word origins" },
        { word: "dialectical", meaning: "logical discussion of ideas" },
        { word: "solipsistic", meaning: "believing only your mind is real" },
        { word: "eudaimonia", meaning: "state of happiness or flourishing (Greek origin)" },
        { word: "axiomatic", meaning: "obviously true" },
        { word: "obsequious", meaning: "too eager to please or obey" },
        { word: "iconoclastic", meaning: "going against accepted beliefs" },
        { word: "hegemony", meaning: "leadership or dominance" },
        { word: "epiphenomenon", meaning: "secondary effect or by-product" },
        { word: "ineffable", meaning: "too great to be described in words" },
        { word: "epistemology", meaning: "study of knowledge" },
        { word: "reticent", meaning: "quiet or reserved" },
        { word: "equanimity", meaning: "calmness in difficult situations" },
        { word: "abstruse", meaning: "hard to understand" },
        { word: "disconsolate", meaning: "very unhappy or hopeless" },
        { word: "mellifluous", meaning: "pleasant sounding" },
        { word: "truculent", meaning: "quick to fight or argue" },
        { word: "machination", meaning: "secret plan or scheme" },
        { word: "impecunious", meaning: "having no money" },
        { word: "chimerical", meaning: "imaginary or wildly unrealistic" },
        { word: "intransigent", meaning: "unwilling to compromise" },
        { word: "nonplussed", meaning: "confused or unsure how to react" },
        { word: "belligerent", meaning: "hostile or aggressive" },
        { word: "ratiocination", meaning: "logical reasoning" },
        { word: "loquacious", meaning: "very talkative" },
        { word: "serendipity", meaning: "happy accident or chance discovery" },
        { word: "misanthrope", meaning: "one who dislikes humans" },
        { word: "egregious", meaning: "extremely bad or shocking" },
        { word: "callipygian", meaning: "having well-shaped buttocks" },
        { word: "anhedonia", meaning: "inability to feel pleasure" },
        { word: "verisimilitude", meaning: "appearance of being true or real" },
        { word: "autodidactic", meaning: "self-taught" },
        { word: "moribund", meaning: "dying or near the end" },
        { word: "catachresis", meaning: "misuse of a word or mixed metaphor" },
        { word: "disambiguation", meaning: "making meaning clear" },
        { word: "inveterate", meaning: "long-established habit" },
        { word: "eleemosynary", meaning: "related to charity" },
        { word: "tergiversation", meaning: "evasion or changing sides" },
        { word: "recherch√©", meaning: "rare, exotic, or obscure" },
        { word: "supererogatory", meaning: "beyond what is required" },
        { word: "antidisestablishmentarianism", meaning: "opposition to the disestablishment of the Church of England" },
        { word: "flummoxed", meaning: "bewildered or perplexed" },
        { word: "onomatopoeia", meaning: "a word that imitates the sound it represents" }
      ],
      tharoorist: [
        { word: "floccinaucinihilipilification", meaning: "the act of saying something is worthless" },
        { word: "pneumonoultramicroscopicsilicovolcanoconiosis", meaning: "lung disease caused by inhaling fine silica dust" },
        { word: "hippopotomonstrosesquipedaliophobia", meaning: "fear of long words" },
        { word: "antidisestablishmentarianism", meaning: "opposition to separating church and state" },
        { word: "supercalifragilisticexpialidocious", meaning: "nonsense word meaning fantastic (from *Mary Poppins*)" },
        { word: "pseudopseudohypoparathyroidism", meaning: "rare genetic disorder that mimics another" },
        { word: "spectrophotofluorometrically", meaning: "in a way that uses light to measure fluorescent chemicals" },
        { word: "thyroparathyroidectomized", meaning: "having had thyroid and parathyroid glands removed" },
        { word: "incomprehensibilities", meaning: "things too difficult to understand" },
        { word: "psychoneuroendocrinological", meaning: "related to psychology, nerves, and hormones" },
        { word: "honorificabilitudinitatibus", meaning: "the state of being able to achieve honors" },
        { word: "antitransubstantiationalist", meaning: "one who opposes transubstantiation (religious doctrine)" },
        { word: "electroencephalographically", meaning: "related to recording brain waves" },
        { word: "deinstitutionalization", meaning: "process of removing from institutions" },
        { word: "disproportionableness", meaning: "state of being out of proportion" },
        { word: "immunoelectrophoretically", meaning: "relating to testing blood proteins using electric current" },
        { word: "hexakosioihexekontahexaphobia", meaning: "fear of the number 666" },
        { word: "psychopharmacological", meaning: "related to drugs affecting the mind" },
        { word: "counterrevolutionaries", meaning: "people against a revolution" },
        { word: "incomprehensibility", meaning: "impossible to understand" },
        { word: "transubstantiationalist", meaning: "believer in the transformation of bread/wine into Christ" },
        { word: "triskaidekaphobia", meaning: "fear of the number 13" },
        { word: "otorhinolaryngological", meaning: "related to ear, nose, and throat medicine" },
        { word: "unconstitutionality", meaning: "being against a nation's constitution" },
        { word: "thyrocalcitonin", meaning: "a hormone from the thyroid gland" },
        { word: "pharmacogenomics", meaning: "how genes affect drug response" },
        { word: "archaeopteryx", meaning: "ancient bird-like dinosaur" },
        { word: "hexylresorcinol", meaning: "antiseptic chemical in throat lozenges" },
        { word: "transtendinous", meaning: "going across a tendon" },
        { word: "paleobiogeography", meaning: "study of where ancient organisms lived" },
        { word: "anticyclogenesis", meaning: "prevention of cyclone formation" },
        { word: "neurophysiopathological", meaning: "related to nerve disease functions" },
        { word: "dermatoglyphics", meaning: "study of fingerprints" },
        { word: "ultramicroscopically", meaning: "in a way too small for a regular microscope" },
        { word: "disproportionateness", meaning: "lack of proper size or amount" },
        { word: "overintellectualization", meaning: "thinking too much in a rational way" },
        { word: "electrophotomicrography", meaning: "taking photos through a microscope using electric light" },
        { word: "thyroparathyroidectomies", meaning: "surgeries removing thyroid and parathyroid glands" },
        { word: "vasoconstrictor", meaning: "agent that narrows blood vessels" },
        { word: "psychotherapeutically", meaning: "in a way related to mental therapy" },
        { word: "anthropocentricity", meaning: "belief that humans are the center of everything" },
        { word: "antituberculostatic", meaning: "preventing or stopping tuberculosis" },
        { word: "magnetohydrodynamics", meaning: "study of magnetic properties of fluids" },
        { word: "aeroastroengineering", meaning: "design of aircraft and spacecraft" },
        { word: "radiocommunication", meaning: "sending signals through radio waves" },
        { word: "subcompartmentalization", meaning: "dividing into very small sections" },
        { word: "immunohistochemistry", meaning: "studying tissues using antibodies" },
        { word: "electrophysiologically", meaning: "relating to electric properties of body functions" },
        { word: "hyperimmunoglobulinemia", meaning: "too many antibodies in the blood" },
        { word: "cinematographically", meaning: "related to filming motion pictures" },
        { word: "incomprehensibilities", meaning: "things that are impossible to understand" },
        { word: "syzygy", meaning: "alignment of celestial bodies" },
        { word: "pneumonoultramicroscopicsilicovolcanoconiosis", meaning: "a lung disease caused by inhaling very fine silica dust" }
      ]
    };

    let currentWord = null;
    let correctAnswers = 0;
    let totalAttempts = 0;
    let timer;
    let timeLeft = 30;
    let timerEnabled = false;
    let selectedLevel = 'easy';

    const scoreDisplay = document.getElementById('score');
    const timerToggle = document.getElementById('timerToggle');
    const timerDisplay = document.getElementById('timerDisplay');
    const modeToggle = document.getElementById('modeToggle');
    const body = document.body;

    const hearButton = document.getElementById('hearButton');
    const answerButton = document.getElementById('answerButton');
    const userInput = document.getElementById('userInput');

    function updateButtonStates(state) {
        if (state === 'initial') {
            hearButton.disabled = true;
            answerButton.disabled = true;
            userInput.value = '';
            userInput.disabled = true;
            document.getElementById('definition').innerText = 'Select a Level to Start. Then Click üîäHear';
            document.getElementById('feedback').innerText = '';
        } else if (state === 'word_loaded') {
            hearButton.disabled = false;
            answerButton.disabled = false;
            userInput.disabled = false;
            userInput.focus();
        } else if (state === 'answer_given') {
            hearButton.disabled = true;
            answerButton.disabled = true;
            userInput.disabled = true;
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        updateButtonStates('initial');
        updateScoreDisplay();
    });

    function toggleDarkMode() {
        body.classList.toggle('dark-mode');
        const isDarkMode = body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
        modeToggle.innerText = isDarkMode ? 'üåô' : '‚òÄÔ∏è';
    }

    const savedDarkMode = localStorage.getItem('darkMode');
    if (savedDarkMode === null || savedDarkMode === 'true') {
        body.classList.add('dark-mode');
        modeToggle.innerText = 'üåô';
        localStorage.setItem('darkMode', true);
    } else {
        modeToggle.innerText = '‚òÄÔ∏è';
    }

    modeToggle.addEventListener('click', toggleDarkMode);

    timerToggle.addEventListener('change', () => {
      timerEnabled = timerToggle.checked;
      if (!timerEnabled) {
        clearInterval(timer);
        timerDisplay.innerText = '';
      } else {
        if (currentWord) startTimer();
      }
    });

    function selectLevelAndStart(level) {
      selectedLevel = level;
      getNextWord();
    }
    
    function getNextWord() {
      clearInterval(timer);
      timeLeft = 30;
      const words = wordList[selectedLevel];
      const rand = Math.floor(Math.random() * words.length);
      currentWord = words[rand];

      if (typeof currentWord === 'string') {
        currentWord = { word: currentWord, meaning: "No definition available." };
      }

      document.getElementById('definition').innerText = currentWord.meaning;
      document.getElementById('feedback').innerText = '';
      document.getElementById('userInput').value = '';
      updateButtonStates('word_loaded');
      
      if (timerEnabled) {
          startTimer();
      } else {
          timerDisplay.innerText = '';
      }
    }

    function speakWord() {
      if (!currentWord) return;
      const utter = new SpeechSynthesisUtterance(currentWord.word);
      utter.lang = 'en-IN';
      utter.volume = parseFloat(document.getElementById('volume').value);
      const voices = speechSynthesis.getVoices();
      utter.voice = voices.find(v => v.lang === 'en-IN' && v.name.toLowerCase().includes('female')) || voices[0];
      speechSynthesis.speak(utter);
    }

    function checkAnswer() {
      if (answerButton.disabled) return;
      const input = document.getElementById('userInput').value.trim().toLowerCase();
      if (!currentWord) {
          document.getElementById('feedback').innerText = "Please select a level first!";
          return;
      }
      totalAttempts++;
      const result = input === currentWord.word.toLowerCase();
      document.getElementById('feedback').innerText = result ? 'üéâ Correct!' : `‚ùå Wrong. It was: ${currentWord.word}`;
      if (result) { correctAnswers++; triggerFallingEmojis(); }
      updateScoreDisplay();
      clearInterval(timer);
      updateButtonStates('answer_given');
      setTimeout(getNextWord, 2000); 
    }

    function updateScoreDisplay() {
        scoreDisplay.innerText = `Score: ${correctAnswers}/${totalAttempts}`;
    }

    function startTimer() {
        if (!timerEnabled) return;
        timerDisplay.innerText = `‚è±Ô∏è ${timeLeft}`;
        timer = setInterval(() => {
            timeLeft--;
            timerDisplay.innerText = `‚è±Ô∏è ${timeLeft}`;
            if (timeLeft <= 0) {
                clearInterval(timer);
                document.getElementById('feedback').innerText = `‚è∞ Time's up! The word was: ${currentWord.word}`;
                updateButtonStates('answer_given');
                setTimeout(getNextWord, 2000); 
            }
        }, 1000);
    }

    const emojis = ['üéâ', '‚ú®', 'üåü', 'ü•≥', 'üèÜ', 'üíØ', 'üòÑ', 'üòä', 'üòÇ', 'üëç'];
    function triggerFallingEmojis() {
        for (let i = 0; i < 15; i++) {
            const emoji = document.createElement('span');
            emoji.classList.add('falling-emoji');
            emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            emoji.style.left = `${Math.random() * 100}vw`;
            emoji.style.animationDelay = `${Math.random() * 0.5}s`;
            document.body.appendChild(emoji);
            emoji.addEventListener('animationend', () => { emoji.remove(); });
        }
    }
    window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>
